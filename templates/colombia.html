<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Refresh" content="300">
    <title>Tracking Intertug: Posicion Actual Flota Colombia</title>
    <style>
      html, body, #map-canvas{
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3&sensor=false&language=es"></script>
    
  </head>
  <body>
    <div id="map-canvas"></div>

<script>

    var image = "http://i.imgur.com/qqxD2uN.png";//"http://i.imgur.com/yoZQPZu.gif";
    //var imagenPlataforma = "http://i.imgur.com/7Ecw2M5.png";
    //var imagenMuelle = "http://i.imgur.com/OfPqcEL.png";

    var infoVentana = null;

    function inicial(){

      var centro = new google.maps.LatLng(7.7146416,-78.3186696);

      var opciones = {
        zoom: 6,
        center: centro,
        mapTypeId: google.maps.MapTypeId.TERRAIN,
        mapTypeControl: true,
        mapTypeControlOptions:{
          position: google.maps.ControlPosition.LEFT_TOP
        },
        streetViewControl: false,
        zoomControlOptions: {
          position: google.maps.ControlPosition.LEFT_CENTER
        },
        panControlOptions: {
          position: google.maps.ControlPosition.LEFT_CENTER
        },
        scaleControl: true,
        scaleControlOptions: {
          position: google.maps.ControlPosition.BOTTOM_CENTER
        },

      }

      var mapa = new google.maps.Map(document.getElementById("map-canvas"), opciones);

      //setMarkers(mapa, plataformas);
      setMarcadores(mapa, tugs);
      infoVentana = new google.maps.InfoWindow({
        content: ""
      });

      var homeControlDiv = document.createElement('div');
      var homeControl = new HomeControl(homeControlDiv, mapa);

      homeControlDiv.index = 1;
      mapa.controls[google.maps.ControlPosition.TOP_RIGHT].push(homeControlDiv);

    }

    function crearZoom(controlDiv, map, nombre){

      controlDiv.style.padding = '5px';

      var controlUI = document.createElement('div');
      controlUI.style.backgroundColor = 'white';
      controlUI.style.borderStyle = 'solid';
      controlUI.style.borderWidth = '2px';
      controlUI.style.cursor = 'pointer';
      controlUI.style.textAlign = 'center';
      controlUI.title = 'Centrar '+ nombre;
      controlDiv.appendChild(controlUI);

      var controlText = document.createElement('div');
      controlText.style.fontFamily = 'Arial,sans-serif';
      controlText.style.fontSize = '12px';
      controlText.style.paddingLeft = '4px';
      controlText.style.paddingRight = '4px';
      controlText.innerHTML = '<b>'+nombre+'</b>';
      controlUI.appendChild(controlText);

      //agregar remolcador = new google.maps.LatLng(tugs[n][1], tugs[n][2]);

      //carex = new google.maps.LatLng(tugs[0][1], tugs[0][2]);
      odin = new google.maps.LatLng(tugs[1][1], tugs[1][2]);
      mara = new google.maps.LatLng(tugs[2][1], tugs[2][2]);
      apolo = new google.maps.LatLng(tugs[3][1], tugs[3][2]);
      chinook = new google.maps.LatLng(tugs[4][1], tugs[4][2]);
      alisios = new google.maps.LatLng(tugs[5][1], tugs[5][2]);
      //bahaireii = new google.maps.LatLng(tugs[6][1], tugs[6][2]);
      sirocco = new google.maps.LatLng(tugs[7][1], tugs[7][2]);
      donlucho = new google.maps.LatLng(tugs[8][1], tugs[8][2]);
      frey = new google.maps.LatLng(tugs[9][1], tugs[9][2]);
      eosii = new google.maps.LatLng(tugs[10][1], tugs[10][2]);
      capidahl = new google.maps.LatLng(tugs[11][1], tugs[11][2]);
      titania = new google.maps.LatLng(tugs[12][1], tugs[12][2]);
      ran = new google.maps.LatLng(tugs[13][1], tugs[13][2]);
      saga = new google.maps.LatLng(tugs[14][1], tugs[14][2]);

      google.maps.event.addDomListener(controlUI, 'click', function() {
        

        //if(nombre == 'Carex'){
        //  map.setCenter(carex);
        //}
        if(nombre == 'Odin'){
          map.setCenter(odin);
        }
        else if(nombre == 'Mara'){
          map.setCenter(mara);
        }
        else if(nombre == 'Apolo'){
          map.setCenter(apolo);
        }
        else if(nombre == 'Chinook'){
          map.setCenter(chinook);
        }
        else if(nombre == 'Alisios'){
          map.setCenter(alisios);
        }
        //else if(nombre == 'BahaireII'){
        //  map.setCenter(bahaireii);
        //}
        else if(nombre == 'Sirocco'){
          map.setCenter(sirocco);
        }
        else if(nombre == 'DonLucho'){
          map.setCenter(donlucho);
        }
        else if(nombre == 'Frey'){
          map.setCenter(frey);
        }
        else if(nombre == 'EosII'){
          map.setCenter(eosii);
        }
        else if(nombre == 'Capidahl'){
          map.setCenter(capidahl);
        }
        else if(nombre == 'Titania'){
          map.setCenter(titania);
        }
        else if(nombre == 'Ran'){
          map.setCenter(ran);
        }
        else if(nombre == 'Saga'){
          map.setCenter(saga);
        }
        map.setZoom(18)
      });

    }

    function HomeControl(controlDiv, map) {

      // crearZoom(controlDiv, map, 'Remolcador');
      crearZoom(controlDiv, map, 'Alisios');
      crearZoom(controlDiv, map, 'Apolo');
      //crearZoom(controlDiv, map, 'BahaireII');
      crearZoom(controlDiv, map, 'Capidahl');
      //crearZoom(controlDiv, map, 'Carex'); 
      crearZoom(controlDiv, map, 'Chinook');
      crearZoom(controlDiv, map, 'DonLucho');
      crearZoom(controlDiv, map, 'EosII');
      crearZoom(controlDiv, map, 'Frey');  
      crearZoom(controlDiv, map, 'Mara');
      crearZoom(controlDiv, map, 'Odin');
      crearZoom(controlDiv, map, 'Ran'); 
      crearZoom(controlDiv, map, 'Sirocco');
      crearZoom(controlDiv, map, 'Saga');
      crearZoom(controlDiv, map, 'Titania'); 
      
    }


    var tugs = [

      /*
      agregar:
      ["Remolcador", {{loopRemolcador.0}}, {{loopRemolcador.1}}, 1, "Nombre: <strong>Remolcador</strong> <br/> Fecha: {{loopRemolcador.3}} <br/> Velocidad: {{loopRemolcador.2}} Nudos"],
      */
      ["Carex", {{loopCarex.0}}, {{loopCarex.1}}, 4, "Nombre: <strong>Carex</strong> <br/> Fecha: {{loopCarex.3}} <br/> Velocidad:  {{loopCarex.2}} Nudos"],
      ["Odin", {{loopOdin.0}}, {{loopOdin.1}}, 4, "Nombre: <strong>Odin</strong> <br/> Fecha: {{loopOdin.3}} <br/> Velocidad:  {{loopOdin.2}} Nudos"],
      ["Mara", {{loopMara.0}}, {{loopMara.1}}, 4, "Nombre: <strong>Mara</strong> <br/> Fecha: {{loopMara.3}} <br/> Velocidad:  {{loopMara.2}} Nudos"],
      ["Apolo", {{loopApolo.0}}, {{loopApolo.1}}, 4, "Nombre: <strong>Apolo</strong> <br/> Fecha: {{loopApolo.3}} <br/> Velocidad:  {{loopApolo.2}} Nudos"],
      ["Chinook", {{loopChinook.0}}, {{loopChinook.1}}, 4, "Nombre: <strong>Chinook</strong> <br/> Fecha: {{loopChinook.3}} <br/> Velocidad:  {{loopChinook.2}} Nudos"],
      ["Alisios", {{loopAlisios.0}}, {{loopAlisios.1}}, 4, "Nombre: <strong>Alisios</strong> <br/> Fecha: {{loopAlisios.3}} <br/> Velocidad:  {{loopAlisios.2}} Nudos"],
      ["BahaireII", {{loopBahaireII.0}}, {{loopBahaireII.1}}, 4, "Nombre: <strong>Bahaire II</strong> <br/> Fecha: {{loopBahaireII.3}} <br/> Velocidad:  {{loopBahaireII.2}} Nudos"],
      ["Sirocco", {{loopSirocco.0}}, {{loopSirocco.1}}, 4, "Nombre: <strong>Sirocco</strong> <br/> Fecha: {{loopSirocco.3}} <br/> Velocidad:  {{loopSirocco.2}} Nudos"],
      ["DonLucho", {{loopDonLucho.0}}, {{loopDonLucho.1}}, 4, "Nombre: <strong>Don Lucho</strong> <br/> Fecha: {{loopDonLucho.3}} <br/> Velocidad:  {{loopDonLucho.2}} Nudos"],
      ["Frey", {{loopFrey.0}}, {{loopFrey.1}}, 4, "Nombre: <strong>Frey</strong> <br/> Fecha: {{loopFrey.3}} <br/> Velocidad:  {{loopFrey.2}} Nudos"],
      ["EosII", {{loopEosii.0}}, {{loopEosii.1}}, 4, "Nombre: <strong>Eos II</strong> <br/> Fecha: {{loopEosii.3}} <br/> Velocidad:  {{loopEosii.2}} Nudos"],
      ["Capidahl", {{loopCapidahl.0}}, {{loopCapidahl.1}}, 4, "Nombre: <strong>Capidahl</strong> <br/> Fecha: {{loopCapidahl.3}} <br/> Velocidad:  {{loopCapidahl.2}} Nudos"],
      ["Titania", {{loopTitania.0}}, {{loopTitania.1}}, 4, "Nombre: <strong>Titania</strong> <br/> Fecha: {{loopTitania.3}} <br/> Velocidad:  {{loopTitania.2}} Nudos"],
      ["Ran", {{loopRan.0}}, {{loopRan.1}}, 4, "Nombre: <strong>Ran</strong> <br/> Fecha: {{loopRan.3}} <br/> Velocidad:  {{loopRan.2}} Nudos"],
      ["Saga", {{loopSaga.0}}, {{loopSaga.1}}, 4, "Nombre: <strong>Saga</strong> <br/> Fecha: {{loopSaga.3}} <br/> Velocidad:  {{loopSaga.2}} Nudos"],
    ];

    // var plataformas = [

    //   ["Corvina11", -3.59541666666, -80.73716666666667, 1, "Plataforma Corvina <br/> CX-11"],
    //   ["Corvina15", -3.60750, -80.73667, 1, "Plataforma Corvina <br/> CX-15"],
    //   ["Albacora", -3.42000, -80.58362, 1, "Plataforma Albacora <br/> Z1-8A"],
    //   ["Muelle", -3.633691, -80.587355, 1, "Muelle De La Cruz"],

    // ];

    // function setMarkers(mapa, markers){

    //     for (var i = 0; i < markers.length; i++) {

    //     var plataformas = markers[i];
    //     var platLatLon = new google.maps.LatLng(plataformas[1], plataformas[2]);
    //     var marcador = new google.maps.Marker({
    //       position: platLatLon,
    //       map: mapa,
    //       icon: (plataformas[0] == "Muelle" ? imagenMuelle : imagenPlataforma),
    //       draggable: false,
    //       title: plataformas[0],
    //       zIndex: plataformas[3],
    //       html: plataformas[4],
    //     });

    //     google.maps.event.addListener(marcador, "mouseover", function () {
    //       infoVentana.setContent(this.html);
    //       infoVentana.open(mapa, this);
    //     });

    //   }
    // }

    function setMarcadores(mapa, marcadores) {

      for (var i = 0; i < marcadores.length; i++) {

        var tugs = marcadores[i];
        var tugsLatLon = new google.maps.LatLng(tugs[1], tugs[2]);
        var marcador = new google.maps.Marker({
          position: tugsLatLon,
          map: mapa,
          icon: image,
          draggable: false,
          title: tugs[0],
          zIndex: tugs[3],
          html: tugs[4],
        });

        google.maps.event.addListener(marcador, "mouseover", function () {
          infoVentana.setContent(this.html);
          infoVentana.open(mapa, this);
        });

        google.maps.event.addListener(marcador, "click", function () {

          /*
          agregar:
          else if (this.title == "Remolcador"){
            window.location = "remolcador";            
          }
          */
          //if (this.title == "Carex"){
          //  window.location = "carex";            
          //}
          if (this.title == "Odin"){
            window.location = "odin";            
          }
          else if (this.title == "Mara"){
            window.location = "mara";            
          }
          else if (this.title == "Apolo"){
            window.location = "apolo";            
          }
          else if (this.title == "Chinook"){
            window.location = "chinook";            
          }
          else if (this.title == "Alisios"){
            window.location = "alisios";            
          }
          //else if (this.title == "BahaireII"){
          //  window.location = "bahaireii";            
          //}
          else if (this.title == "Sirocco"){
            window.location = "sirocco";            
          }
          else if (this.title == "DonLucho"){
            window.location = "donlucho";            
          }
          else if (this.title == "Frey"){
            window.location = "frey";            
          }
          else if (this.title == "EosII"){
            window.location = "eosii";            
          }
          else if (this.title == "Capidahl"){
            window.location = "capidahl";            
          }
          else if (this.title == "Titania"){
            window.location = "titania";            
          }
          else if (this.title == "Ran"){
            window.location = "ran";            
          }
          else if (this.title == "Saga"){
            window.location = "saga";            
          }
        });

        google.maps.event.addListener(marcador, "mouseout", function () {
          infoVentana.close();

        });
      }
    }

    google.maps.event.addDomListener(window, 'load', inicial);

    </script>
  </body>
</html>
